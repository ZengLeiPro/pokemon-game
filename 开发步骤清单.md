# 《关都文字对战》开发步骤清单

## 📋 使用说明

这是一份**从零到完成的任务清单**，按顺序完成每一步，你就能做出完整的游戏！

**如何使用**：
- ✅ 完成一项就打勾
- 🔄 遇到问题就标记，稍后解决
- 📝 每完成一个阶段就测试一次

---

## 📁 阶段0：准备工作（0.5天）

### 环境准备
- [ ] 安装代码编辑器（推荐VS Code）
- [ ] 安装浏览器（推荐Chrome，方便调试）
- [ ] 创建项目文件夹`pokemon-game`
- [ ] 学习基础HTML、CSS、JavaScript（如果完全不懂）

### 文件结构创建
- [ ] 创建 `index.html`
- [ ] 创建 `styles.css`
- [ ] 创建 `scripts/` 文件夹
- [ ] 在 `scripts/` 中创建以下文件：
  - [ ] `data.js`
  - [ ] `pokemon.js`
  - [ ] `move.js`
  - [ ] `battle.js`
  - [ ] `gameState.js`
  - [ ] `ui.js`
  - [ ] `main.js`

### 测试环境
- [ ] 双击 `index.html` 能在浏览器打开
- [ ] F12打开开发者工具，能看到Console面板
- [ ] 在Console输入 `console.log('测试')` 能看到输出

---

## 📁 阶段1：创建基础HTML结构（1天）

### 1.1 创建HTML骨架
参考：《开发文档-前端界面开发.md》第1节

- [ ] 复制完整的HTML结构到 `index.html`
- [ ] 添加 `<meta viewport>` 标签（手机适配）
- [ ] 链接 `styles.css` 文件
- [ ] 链接所有JavaScript文件（注意顺序！）

### 1.2 测试HTML
- [ ] 在浏览器打开，能看到标题"关都文字对战：初始冒险"
- [ ] 能看到初始选择界面（3个按钮）
- [ ] F12检查Console，没有红色错误

---

## 📁 阶段2：创建CSS样式（1-2天）

### 2.1 全局样式
参考：《开发文档-前端界面开发.md》第2节

- [ ] 复制全局样式（`* {}` 和 `body {}`）到 `styles.css`
- [ ] 设置游戏容器样式（`#game-container`）
- [ ] 测试：刷新浏览器，背景应该有渐变色

### 2.2 界面样式
- [ ] 添加标题栏样式（`#game-header`）
- [ ] 添加初始选择界面样式（`.starter-btn`等）
- [ ] 添加主界面样式（`#player-status`、`#message-box`等）
- [ ] 添加战斗界面样式（`.status-box`、`#battle-log`等）
- [ ] 测试：所有按钮应该有hover效果

### 2.3 响应式样式
- [ ] 添加手机端适配（`@media (max-width: 600px)`）
- [ ] 测试：在手机浏览器或浏览器的设备模拟器中查看
- [ ] 确保按钮在手机上够大（≥65px高）
- [ ] 确保文字在手机上够大（≥18px）

### 2.4 动画效果
- [ ] 添加淡入动画（`@keyframes fadeIn`）
- [ ] 添加HP条动画（`@keyframes hpShake`）
- [ ] 添加战斗日志滑入动画（`@keyframes slideIn`）
- [ ] 测试：切换界面应该有平滑过渡

---

## 📁 阶段3：创建游戏数据（1-2天）

### 3.1 属性克制表
参考：《开发文档-数据结构设计.md》第3节

在 `data.js` 中：
- [ ] 创建 `TYPE_CHART` 对象
- [ ] 添加火、水、草、电、普通等属性的克制关系
- [ ] 测试：在Console输入 `TYPE_CHART['火']['草']` 应该返回 `2.0`

### 3.2 经验值等级表
参考：《开发文档-数据结构设计.md》第4节

- [ ] 创建 `EXP_TABLE` 对象（1-50级）
- [ ] 测试：`EXP_TABLE[16]` 应该返回 `4096`

### 3.3 技能数据
参考：《开发文档-数据结构设计.md》第2节

- [ ] 创建 `MOVE_DATA` 对象
- [ ] 添加以下技能（最少）：
  - [ ] 火花（火系攻击）
  - [ ] 摇尾巴（降防御）
  - [ ] 水枪（水系攻击）
  - [ ] 缩入壳中（升防御）
  - [ ] 藤鞭（草系攻击）
  - [ ] 瞪眼（降防御）
  - [ ] 龙之怒（固定40伤害，可简化为普通攻击）
  - [ ] 撞击（普通系攻击）
- [ ] 测试：`MOVE_DATA['ember']` 能返回完整数据

### 3.4 宝可梦数据
参考：《开发文档-数据结构设计.md》第1节和第9节

- [ ] 创建 `POKEMON_DATA` 对象
- [ ] 添加御三家数据：
  - [ ] 小火龙（charmander）
  - [ ] 杰尼龟（squirtle）
  - [ ] 妙蛙种子（bulbasaur）
- [ ] 添加它们的进化形态：
  - [ ] 火恐龙（charmeleon）
  - [ ] 喷火龙（charizard）
  - [ ] 卡咪龟（wartortle）
  - [ ] 水箭龟（blastoise）
  - [ ] 妙蛙草（ivysaur）
  - [ ] 妙蛙花（venusaur）
- [ ] 添加野生宝可梦数据（最少5种）：
  - [ ] 绿毛虫（caterpie）
  - [ ] 小拉达（rattata）
  - [ ] 波波（pidgey）
  - [ ] 皮卡丘（pikachu）（可选）
  - [ ] 穿山鼠（sandshrew）（可选）
- [ ] 测试：`POKEMON_DATA['charmander']` 能返回完整数据

### 3.5 野生宝可梦生成池
参考：《开发文档-数据结构设计.md》第5节

- [ ] 创建 `WILD_POKEMON_POOL` 数组
- [ ] 为每个野生宝可梦设置等级范围和权重
- [ ] 测试：数组至少有5个条目

---

## 📁 阶段4：实现类和核心逻辑（3-4天）

### 4.1 Move类
参考：《开发文档-战斗系统.md》第6节

在 `move.js` 中：
- [ ] 创建 `Move` 类
- [ ] 实现构造函数（从MOVE_DATA加载）
- [ ] 实现 `getDisplayInfo()` 方法
- [ ] 测试：`new Move('ember')` 能创建火花技能

### 4.2 Pokemon类
参考：《开发文档-战斗系统.md》第5节

在 `pokemon.js` 中：
- [ ] 创建 `Pokemon` 类
- [ ] 实现构造函数（计算属性、加载技能）
- [ ] 实现 `gainExp()` 方法
- [ ] 实现 `levelUp()` 方法
- [ ] 实现 `checkLearnMove()` 方法
- [ ] 实现 `checkEvolution()` 方法
- [ ] 实现 `evolve()` 方法
- [ ] 实现 `calculateExpToNext()` 方法
- [ ] 实现 `fullHeal()` 方法
- [ ] 测试：在Console创建一只1级小火龙
  ```javascript
  const charmander = new Pokemon('charmander', 1);
  console.log(charmander);  // 应该显示完整属性
  ```
- [ ] 测试：给它加经验并升级
  ```javascript
  charmander.gainExp(5000);
  console.log(charmander.level);  // 应该>1
  ```

### 4.3 Battle类
参考：《开发文档-战斗系统.md》第2节

在 `battle.js` 中：
- [ ] 创建 `Battle` 类
- [ ] 实现构造函数
- [ ] 实现 `start()` 方法
- [ ] 实现 `executeTurn()` 方法
- [ ] 实现 `executeMove()` 方法
- [ ] 实现 `executeAttackMove()` 方法
- [ ] 实现 `executeSupportMove()` 方法
- [ ] 实现 `getModifiedStat()` 方法
- [ ] 实现 `getTypeEffectiveness()` 方法
- [ ] 实现 `checkBattleEnd()` 方法
- [ ] 实现 `endBattle()` 方法

### 4.4 AI系统
参考：《开发文档-战斗系统.md》第3节

在 `battle.js` 中（可以放在Battle类后面）：
- [ ] 创建 `SimpleAI` 类
- [ ] 实现 `chooseMove()` 静态方法
- [ ] 测试：AI能随机选择技能

### 4.5 野生宝可梦生成函数
参考：《开发文档-战斗系统.md》第4节

在 `battle.js` 中：
- [ ] 实现 `generateWildPokemon(playerLevel)` 函数
- [ ] 测试：生成的宝可梦等级应该在 playerLevel±2 范围内
  ```javascript
  const wild = generateWildPokemon(10);
  console.log(wild.level);  // 应该在8-12之间
  ```

---

## 📁 阶段5：实现游戏状态管理（1天）

### 5.1 创建游戏状态对象
参考：《开发文档-数据结构设计.md》第6节

在 `gameState.js` 中：
- [ ] 创建 `gameState` 对象
- [ ] 添加 `player` 对象（pokemon、battlesWon、totalBattles）
- [ ] 添加 `battle` 对象（isActive、instance、wildPokemon）
- [ ] 添加 `phase` 字段（'start'、'main'、'battle'）

### 5.2 实现保存/读取功能
参考：《开发文档-数据结构设计.md》第7节

- [ ] 实现 `saveGame()` 函数（使用localStorage）
- [ ] 实现 `loadGame()` 函数
- [ ] 测试：调用saveGame()，刷新页面，调用loadGame()应该恢复状态

---

## 📁 阶段6：实现UI控制（2-3天）

### 6.1 创建UI模块
参考：《开发文档-前端界面开发.md》第3节

在 `ui.js` 中：
- [ ] 创建 `UI` 对象
- [ ] 实现 `showScreen(screenId)` 方法
- [ ] 实现 `updatePlayerStatus(pokemon)` 方法
- [ ] 实现 `showMessage(text)` 方法
- [ ] 实现 `addBattleLog(text, cssClass)` 方法
- [ ] 实现 `clearBattleLog()` 方法
- [ ] 实现 `updateBattleStatus(player, wild)` 方法
- [ ] 实现 `createMoveButtons(moves, callback)` 方法
- [ ] 实现 `setMoveButtonsEnabled(enabled)` 方法
- [ ] 实现 `updateStats(wins, total)` 方法

### 6.2 测试UI功能
在Console中测试：
- [ ] `UI.showMessage('测试消息')` 能在消息框显示
- [ ] `UI.addBattleLog('测试日志')` 能在战斗日志显示
- [ ] `UI.showScreen('main-screen')` 能切换界面

---

## 📁 阶段7：实现主程序流程（2-3天）

### 7.1 初始化游戏
参考：《开发文档-战斗系统.md》第7节

在 `main.js` 中：
- [ ] 实现页面加载时的初始化逻辑
- [ ] 尝试读取存档（loadGame）
- [ ] 如果没有存档，显示初始选择界面
- [ ] 如果有存档，直接进入主界面

### 7.2 初始选择流程
- [ ] 为3个初始宝可梦按钮添加点击事件
- [ ] 点击后创建对应的Pokemon对象
- [ ] 保存到 `gameState.player.pokemon`
- [ ] 切换到主界面
- [ ] 更新玩家状态显示
- [ ] 显示欢迎消息

### 7.3 主界面功能
- [ ] 为"开始战斗"按钮添加点击事件
- [ ] 点击后：
  - [ ] 生成野生宝可梦
  - [ ] 创建Battle实例
  - [ ] 切换到战斗界面
  - [ ] 调用 `battle.start()`
  - [ ] 生成技能按钮
- [ ] 为"宝可梦中心"按钮添加点击事件（可选，暂时只显示消息）

### 7.4 战斗流程
- [ ] 实现 `onPlayerMoveSelected(move)` 函数
- [ ] 点击技能按钮时：
  - [ ] 禁用所有技能按钮
  - [ ] AI选择技能
  - [ ] 调用 `battle.executeTurn(playerMove, aiMove)`
  - [ ] 如果战斗未结束，重新启用技能按钮
  - [ ] 如果战斗结束，等待3秒后返回主界面

### 7.5 自动保存
- [ ] 在战斗结束后调用 `saveGame()`
- [ ] 在升级后调用 `saveGame()`
- [ ] 在进化后调用 `saveGame()`

---

## 📁 阶段8：完整测试（1-2天）

### 8.1 功能测试
- [ ] 测试1：选择小火龙，能进入游戏
- [ ] 测试2：点击"开始战斗"，能遇到野生宝可梦
- [ ] 测试3：点击技能按钮，能看到战斗过程
- [ ] 测试4：击败野生宝可梦，能获得经验
- [ ] 测试5：战斗结束后HP自动回满
- [ ] 测试6：多次战斗后能升级
- [ ] 测试7：升到16级能进化成火恐龙
- [ ] 测试8：进化后属性提升
- [ ] 测试9：刷新页面后进度还在（localStorage）
- [ ] 测试10：战绩统计正确

### 8.2 属性相克测试
- [ ] 用小火龙打绿毛虫（草系），伤害应该翻倍
- [ ] 用小火龙打杰尼龟（水系），伤害应该减半
- [ ] 用皮卡丘（电系）打飞行系，伤害应该翻倍

### 8.3 辅助技能测试
- [ ] 使用"摇尾巴"，对手防御应该降低
- [ ] 使用"缩入壳中"，自己防御应该提升
- [ ] 能力等级变化应该正确显示在日志中

### 8.4 边界情况测试
- [ ] HP降到0时战斗应该结束
- [ ] 等级上限50级（给足够经验不会超过50级）
- [ ] 技能槽满了（4个）不能再学
- [ ] 连续战败多次，游戏不会崩溃

### 8.5 跨端测试
- [ ] 在电脑Chrome浏览器测试
- [ ] 在手机浏览器测试
- [ ] 在平板测试（可选）
- [ ] 确保所有按钮在触摸屏上可点击
- [ ] 确保文字在小屏幕上清晰可读

### 8.6 性能测试
- [ ] 连续战斗20次，游戏应该流畅
- [ ] 战斗日志太长时应该能滚动
- [ ] 没有内存泄漏（打开Chrome性能监视器观察）

---

## 📁 阶段9：优化和润色（1-2天）

### 9.1 用户体验优化
- [ ] 添加按钮点击音效（可选）
- [ ] 添加战斗音效（可选）
- [ ] 优化战斗日志显示速度（逐条显示而非瞬间全部）
- [ ] 添加HP条颜色变化（低于50%变黄，低于20%变红）
- [ ] 添加升级时的闪烁动画
- [ ] 添加进化时的特殊动画

### 9.2 界面美化
- [ ] 调整颜色方案，确保护眼
- [ ] 调整间距，确保不拥挤
- [ ] 添加宝可梦像素图标（可选，可以用emoji代替）
- [ ] 统一按钮风格

### 9.3 代码优化
- [ ] 添加代码注释
- [ ] 移除console.log调试语句
- [ ] 统一命名规范
- [ ] 提取重复代码为函数

---

## 📁 阶段10：部署和分享（0.5天）

### 10.1 本地测试
- [ ] 清空localStorage，重新完整测试一遍
- [ ] 确保没有Console错误
- [ ] 确保所有功能正常

### 10.2 部署到线上（可选）
选择以下任一方式：

**方式A：GitHub Pages（免费）**
- [ ] 创建GitHub账号
- [ ] 创建仓库 `pokemon-game`
- [ ] 上传所有文件
- [ ] 在仓库设置中启用GitHub Pages
- [ ] 访问 `https://你的用户名.github.io/pokemon-game`

**方式B：Vercel（免费）**
- [ ] 注册Vercel账号
- [ ] 连接GitHub仓库
- [ ] 自动部署
- [ ] 获得唯一链接

**方式C：Netlify（免费）**
- [ ] 注册Netlify账号
- [ ] 拖拽文件夹上传
- [ ] 自动部署

### 10.3 分享游戏
- [ ] 复制游戏链接
- [ ] 分享给朋友测试
- [ ] 收集反馈
- [ ] 迭代改进

---

## 🎯 完成标志

当你完成以下所有检查，MVP版本就大功告成了！

- ✅ 能选择御三家并开始游戏
- ✅ 能进行1V1对战，使用攻击和辅助技能
- ✅ 伤害计算正确，属性克制生效
- ✅ 战斗结束后自动回血
- ✅ 能获得经验、升级、进化
- ✅ 手机和电脑都能流畅玩
- ✅ 游戏进度能保存

---

## 📈 后续扩展（可选）

如果你想继续完善游戏，可以考虑：

### 扩展内容
- [ ] 添加更多宝可梦（目标：50只）
- [ ] 添加更多技能（目标：50个）
- [ ] 添加双属性宝可梦的复合克制计算
- [ ] 添加特殊效果技能（中毒、麻痹、睡眠等）

### 新功能
- [ ] 道馆挑战模式（8个道馆馆主）
- [ ] 技能替换功能（在宝可梦中心）
- [ ] 成就系统（击败100只宝可梦等）
- [ ] 排行榜（本地最高等级记录）
- [ ] 稀有宝可梦系统（闪光宝可梦）

### 进阶功能
- [ ] 在线对战（需要后端服务器）
- [ ] 宝可梦交换（需要后端）
- [ ] 自定义队伍（携带6只宝可梦）
- [ ] 背包系统（携带恢复道具）

---

## 🆘 遇到问题怎么办？

### 常见问题排查

**问题1：页面打不开**
- 检查文件路径是否正确
- 检查文件名拼写
- 用浏览器打开开发者工具查看错误

**问题2：JavaScript不生效**
- 检查script标签顺序（data.js必须在最前面）
- 检查Console是否有红色错误
- 检查语法（括号、分号、引号是否匹配）

**问题3：样式不显示**
- 检查CSS文件路径
- 检查class名是否拼写正确
- 用浏览器检查元素，看CSS是否加载

**问题4：战斗逻辑出错**
- 在关键位置添加 `console.log()` 查看变量值
- 逐步调试，找到出错的函数
- 对照文档检查代码

**问题5：数据不保存**
- 检查localStorage是否被浏览器禁用
- 检查saveGame()是否被调用
- 在Console输入 `localStorage.getItem('pokemonSave')` 查看数据

---

## 🎓 学习资源

- **MDN Web文档**：https://developer.mozilla.org/zh-CN/
- **JavaScript教程**：https://javascript.info/
- **CSS技巧**：https://css-tricks.com/
- **宝可梦数据**：https://wiki.52poke.com/

---

**祝你开发顺利！一步一个脚印，你一定能做出自己的宝可梦游戏！** 🎮✨
